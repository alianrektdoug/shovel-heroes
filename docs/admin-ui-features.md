# Admin 管理後台 UI 功能說明

## 功能概覽

### 1. 需求管理（Grids）- 垃圾桶功能

#### 視圖切換
```
┌────────────────────────────────────────────────────┐
│ [網格列表 (42)] [🗑️ 垃圾桶 (5)]                    │
└────────────────────────────────────────────────────┘
```

#### 網格列表視圖（管理員）
```
┌─────────────────────────────────────────────────────┐
│ ☑️ 全選                                             │
│                                                     │
│ [批量刪除 (3)]                    [匯出CSV] [匯入] │
├─────────────────────────────────────────────────────┤
│ ┌──────────────────────────────────────────────┐  │
│ │ ☑️ 網格-A1        [已完成] [人力任務]         │  │
│ │ 志工: 15/20                                  │  │
│ │ 集合: 台南市仁德區太子路                      │  │
│ │ [編輯] [查看] [🗑️]                            │  │
│ └──────────────────────────────────────────────┘  │
│ ┌──────────────────────────────────────────────┐  │
│ │ ☑️ 網格-B2        [開放中] [污泥暫置場]       │  │
│ │ 志工: 8/30                                   │  │
│ │ 物資: 5 項目                                 │  │
│ │ [編輯] [查看] [🗑️]                            │  │
│ └──────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────┘
```

#### 垃圾桶視圖（管理員）
```
┌─────────────────────────────────────────────────────┐
│ ☑️ 全選                                             │
│                                                     │
│ [批量還原 (2)] [永久刪除 (2)]                       │
├─────────────────────────────────────────────────────┤
│ ┌──────────────────────────────────────────────┐  │
│ │ ☑️ 網格-C3  [已刪除] [開放中] [住宿地點]      │  │
│ │ 志工: 5/10                                   │  │
│ │ [🔄 還原] [❌ 永久刪除]                       │  │
│ └──────────────────────────────────────────────┘  │
│ ┌──────────────────────────────────────────────┐  │
│ │ ☑️ 網格-D4  [已刪除] [準備中] [物資停放處]    │  │
│ │ 物資: 3 項目                                 │  │
│ │ [🔄 還原] [❌ 永久刪除]                       │  │
│ └──────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────┘
```

### 2. 用戶管理（Users）

#### 用戶列表視圖（僅管理員）
```
┌───────────────────────────────────────────────────────────┐
│ 👤 用戶權限管理                                           │
│ 管理系統用戶的角色和權限。只有管理員（管理模式）可以...   │
├───────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 🔵 王小明                          [管理員]          │ │
│ │    wang@example.com               [▼ 管理員]       │ │
│ └─────────────────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 🔵 李大華                          [網格管理者]      │ │
│ │    lee@example.com                [▼ 網格管理者]   │ │
│ └─────────────────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 🔵 陳美玲                          [一般用戶]        │ │
│ │    chen@example.com               [▼ 一般用戶]     │ │
│ └─────────────────────────────────────────────────────┘ │
├───────────────────────────────────────────────────────────┤
│ 📘 角色權限說明                                           │
│ 🛡️ 管理員：擁有所有權限，可以管理災區、網格、用戶...      │
│ ⚙️ 網格管理者：可以管理被指派的網格，編輯網格資訊        │
│ 👥 一般用戶：可以瀏覽網格、報名志工、捐贈物資            │
└───────────────────────────────────────────────────────────┘
```

## 視覺設計特色

### 顏色系統

#### 網格狀態顏色
- **緊急（缺口 ≥60%）**：紅色邊框 `border-l-red-500`
- **中等（缺口 40-60%）**：橙色邊框 `border-l-orange-500`
- **正常（缺口 <40%）**：綠色邊框 `border-l-green-500`
- **垃圾桶**：灰色邊框 + 灰背景 `border-l-gray-400 bg-gray-50`

#### 角色徽章顏色
- **管理員**：紅底紅字 `bg-red-100 text-red-800`
- **網格管理者**：藍底藍字 `bg-blue-100 text-blue-800`
- **一般用戶**：灰底灰字 `bg-gray-100 text-gray-800`

#### 操作按鈕顏色
- **刪除/永久刪除**：紅色 `variant="destructive"`
- **還原**：綠色 `text-green-600 border-green-200`
- **編輯**：預設 `variant="outline"`
- **匯出/匯入**：藍色/橙色主題

### 互動反饋

#### 選中狀態
```css
選中的網格卡片會顯示：
- 藍色外框：ring-2 ring-blue-500
- Checkbox 打勾
```

#### Hover 效果
```css
- 用戶卡片 hover：border 變藍 (hover:border-blue-300)
- 按鈕 hover：背景變深色
```

## 權限控制矩陣

| 功能 | 管理員 | 網格管理者 | 一般用戶 |
|------|--------|-----------|---------|
| 查看網格列表 | ✅ | ✅ | ✅ |
| 編輯網格 | ✅ | ✅ (被指派的) | ✅ |
| 刪除網格（移至垃圾桶） | ✅ | ❌ | ❌ |
| 批量操作 | ✅ | ❌ | ❌ |
| 查看垃圾桶 | ✅ | ❌ | ❌ |
| 還原網格 | ✅ | ❌ | ❌ |
| 永久刪除 | ✅ | ❌ | ❌ |
| CSV 匯入/匯出 | ✅ | ❌ | ❌ |
| 用戶管理 | ✅ | ❌ | ❌ |
| 變更角色 | ✅ | ❌ | ❌ |

## 操作流程

### 批量刪除網格
1. 切換到「網格列表」視圖
2. 勾選要刪除的網格（或點選「全選」）
3. 點選「批量刪除 (N)」按鈕
4. 確認刪除對話框
5. 網格移至垃圾桶

### 從垃圾桶還原
1. 切換到「垃圾桶」視圖
2. 勾選要還原的網格
3. 點選「批量還原 (N)」按鈕
4. 確認還原對話框
5. 網格回到網格列表

### 變更用戶角色
1. 進入「用戶管理」頁籤
2. 找到目標用戶
3. 點選角色下拉選單
4. 選擇新角色（一般用戶/網格管理者/管理員）
5. 確認變更
6. 系統更新角色

## 空狀態提示

### 垃圾桶為空
```
   🗑️
垃圾桶是空的
```

### 無符合條件的網格
```
   📊
目前沒有符合條件的網格
```

### 無用戶資料
```
   👤
無法載入用戶列表或您沒有權限查看
請確認您有管理員權限並處於管理模式
```

## 響應式設計

### 網格佈局
- **手機（<768px）**：1 欄
- **平板（768-1024px）**：2 欄
- **桌面（>1024px）**：3 欄

### 按鈕佈局
- 小螢幕：按鈕垂直堆疊
- 大螢幕：按鈕水平排列

## 無障礙設計（Accessibility）

- ✅ 所有按鈕都有 `title` 提示
- ✅ Checkbox 有明確的選中狀態
- ✅ 角色選單有圖示輔助識別
- ✅ 危險操作有警告符號（⚠️）
- ✅ 顏色編碼搭配文字標籤

## 效能考量

- 使用 `useCallback` 避免不必要的重新渲染
- 條件式渲染減少 DOM 元素
- 批量操作使用 `Promise.all` 並行處理
- 狀態更新後自動重新載入資料
